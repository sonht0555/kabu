<!DOCTYPE html>
<html>
  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta name="apple-mobile-web-app-capable" content="none" />
      <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
      <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
      <link rel="stylesheet" type="text/css" href="./src/css/main.css" />
      <link rel="apple-touch-icon" href="img/icon.png" />
      <link rel="icon" href="img/favi.png" type="image/png" />
      <link rel="manifest" href="manifest.json" />
      <script src="./src/library/interact.js"></script>
      <script src="./src/library/nip.js"></script>
      <title>Kabu</title>
      <script>
       if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('Service Worker registered!', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
            navigator.serviceWorker.addEventListener('message', function (event) {
            console.log('Received message from Service Worker:', event.data);
            appVer.textContent = event.data.msg
            });
        }
      </script>
  </head>
<body>
    <!-- Layer Ingame -->
    <div class="errorLog column"></div>
    <div class="gap-15 column in-game disable" id="in-game">
        <div class="target-boxes" id="target-boxes"></div>
        <div class="gap-15 emu-display">
            <div class="load-state" id="loadStateButton"></div>
            <div class="flex-1 bc dpad-l" id="L"></div>
            <div class="flex-1 column sha Sega" id="img-shader">
                <div class="notification-container bc">
                    <svg width="11" height="15" viewBox="0 0 11 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect id ="led00"  y="7" width="2" height="1" fill="rgba(245, 232, 209, 0.4)"/>
                        <rect id ="led01"  x="3" y="6" width="2" height="2" fill="rgba(245, 232, 209, 0.4)"/>
                        <rect id ="led02"  x="6" y="6" width="2" height="2" fill="rgba(245, 232, 209, 0.4)"/>
                        <rect id ="led03"  x="9" y="6" width="2" height="2" fill="rgba(245, 232, 209, 0.4)"/>
                        <rect id ="led04"  y="9" width="2" height="2" fill="rgba(245, 232, 209, 0.4)"/>
                        <rect id ="led05"  x="3" y="9" width="2" height="2" fill="rgba(245, 232, 209, 0.4)"/>
                        <rect id ="led06"  x="6" y="9" width="2" height="2" fill="rgba(245, 232, 209, 0.4)"/>
                        <rect id ="led07"  x="9" y="9" width="2" height="2" fill="rgba(245, 232, 209, 0.4)"/>
                        </svg>  
                    <span id="noti-mess"></span>
                    <div class="flex-1"></div>
                    <span class="timer" id="timer"></span>
                </div>
                <div class="flex-1 cw">
                    <div class="canvas-container cw hw">
                        <canvas width="240" height="160" class="canvas" id="canvas"></canvas>
                    </div>
                    <div class="column message-container" id="">
                        <div class="flex-1" id="areaSet"></div>
                        <div class="flex-1" id=""></div>
                    </div>
                    <div class="message-container visible" id="control-setting">
                        <div class="flex-1 column control-setting">
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Power</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-blank"></div>
                                    <div id="box0" class="flex-1 box">Reboot</div>
                                    <div class="cs-next"></div>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Cheat</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-blank"></div>
                                    <div id="box1" class="flex-1 box" contenteditable="false">Off</div>
                                    <div class="cs-next"></div>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Auto Sav</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-minus"></div>
                                    <div id="box2" class="flex-1 box">On</div>
                                    <div class="cs-plus"></div>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Shader</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-minus"></div>
                                    <div id="box3" class="flex-1 box">sd-1</div>
                                    <div class="cs-plus"></div>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Shader Op</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-minus"></div>
                                    <div id="box4" class="flex-1 box">0.0</div>
                                    <div class="cs-plus"></div>
                                </div>
                            </div>

                            <div class="flex-1">
                                <div class="flex-1 cs-name">Brightness</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-minus"></div>
                                    <div id="box5" class="flex-1 box">0.0</div>
                                    <div class="cs-plus"></div>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Contrast</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-minus"></div>
                                    <div id="box6" class="flex-1 box">0.0</div>
                                    <div class="cs-plus"></div>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Saturate</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-minus"></div>
                                    <div id="box7" class="flex-1 box">0.0</div>
                                    <div class="cs-plus"></div>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex-1 cs-name">Sepia</div>
                                <div class="flex-1 cs-detail">
                                    <div class="cs-minus"></div>
                                    <div id="box8" class="flex-1 box">0.0</div>
                                    <div class="cs-plus"></div>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1"></div>
                    </div>
                    <div class="message-container column visible" id="stateList">
                        <div class="flex-1">
                            <div class="flex-1 stateDiv" id="stateDiv00">
                                <div class="stateImg" id="state00">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[00]</div>
                                    <div class="stateDate" id="dateState00"></div>
                                </div>
                            </div>
                            <div class="flex-1 stateDiv" id="stateDiv01">
                                <div class="stateImg" id="state01">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[01]</div>
                                    <div class="stateDate" id="dateState01"></div>
                                </div>
                            </div>
                            <div class="flex-1 stateDiv" id="stateDiv02">
                                <div class="stateImg" id="state02">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[02]</div>
                                    <div class="stateDate" id="dateState02"></div>
                                </div>
                            </div>
                            <div class="flex-1 stateDiv" id="stateDiv03">
                                <div class="stateImg" id="state03">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[03]</div>
                                    <div class="stateDate" id="dateState03"></div>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1">
                            <div class="flex-1 stateDiv" id="stateDiv04">
                                <div class="stateImg" id="state04">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[04]</div>
                                    <div class="stateDate" id="dateState04"></div>
                                </div>
                            </div>
                            <div class="flex-1 stateDiv" id="stateDiv05">
                                <div class="stateImg" id="state05">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[05]</div>
                                    <div class="stateDate" id="dateState05"></div>
                                </div>
                            </div>
                            <div class="flex-1 stateDiv" id="stateDiv06">
                                <div class="stateImg" id="state06">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[06]</div>
                                    <div class="stateDate" id="dateState06"></div>
                                </div>
                            </div>
                            <div class="flex-1 stateDiv" id="stateDiv07">
                                <div class="stateImg" id="state07">
                                </div>
                                <div class="flex-1 stateInfo column cw">
                                    <div class="stateTitle">[07]</div>
                                    <div class="stateDate" id="dateState07"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="message-container column visible" id="areaTrans">
                        <div id="resizable-draggable">
                            <div class="resizer bottom-right"></div>
                            <div class="resizer top-left"></div> 
                          </div>
                    </div>
                </div>
                <div id="input-container" class="input-container flex-1">
                    <div id="logoOcr" class="logoOcr"></div>
                    <div class="flex-1" style="height:18px;">
                        <div id="inputText" class="inputText"></div>
                    </div> 
                </div>
            </div>
            <div class="flex-1 bc dpad-r" id="R"></div>
            <div class="save-state" id="saveStateButton"></div>
        </div>
        <div class="gap-34 emu-menu" id="control-pad">
            <div class="flex-1 gap-15">
                <div class="bc dpad-state" id="statePageButton"></div>
                <div class="flex-1 bc dpad-select" id="Select"></div>
            </div>
            <div class="flex-1 gap-15">
                <div class="flex-1 bc dpad-start" id="Start"></div>
                <div class="bc dpad-menu" id="menu-pad"></div>
            </div>
        </div>
        <div class="between column bc emu-control" id="emu-control">
            <div class="flex-1 gap-34">
                <div class="flex-1">
                    <div class="flex-1 bc1 ch cw dpad">
                        <div class="d-pad">
                            <div class="ch">
                                <div class="pad-ul" id="Up-left"></div>
                            </div>
                            <div class="flex-1 column">
                                <div class="pad-ur" id="Up-right"></div>
                                <div class="flex-1 column">
                                    <div class="flex-1">
                                        <div class="flex-1 ch cw pad-u" id="Up"></div>
                                        <div class="flex-1 ch cw pad-r" id="Right"></div>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex-1 ch cw pad-l" id="Left"></div>
                                        <div class="flex-1 ch cw pad-d" id="Down"></div>
                                    </div>
                                </div>
                                <div class="pad-dl" id="Down-left"></div>
                            </div>
                            <div class="ch">
                                <div class="pad-dr" id="Down-right"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex-1 column gap-15">
                    <div class="flex-1 gap-15">
                        <div class="flex-1 bc1 dpad-a" id="A"></div>
                        <div class="bc1 dpad-turbo" id="turbo"></div>
                    </div>
                    <div class="flex-1 gap-15 bc1" id="B">
                        <div class="flex-1 dpad-b"></div>
                        <div class="dpad-blank"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="dynamic" id="dynamic">

        </div>
    </div>

    <div class="between column localStorage disable" id="storage">
        <div class="storage gap-10">
            <div class="flex-1 home bc" id="backToHome"></div>
            <label class="flex-1 upload-file bc" for="upLoadFile"></label>
            <div class="flex-1 gap-10">
                <div class="flex-1 cloud-restore" id="dropboxRestore"></div>
                <div class="flex-1 cloud-backup" id="dropboxBackup"></div>
            </div>
            <div class="flex-1 cloud-dropbox" id="dropboxCloud"></div>
            <input type="file" id="upLoadFile" hidden />
        
        </div>
        <div class="column flex-disable mgba-storage" id="mgba-storage" style="overflow: auto;">
            <div class="flex-1 rom-item">ROM file.</div>
            <div id="romsFile" class="column"></div>
            <div class="flex-1 rom-item">STATE file.</div>
            <div id="statesFile" class="column"></div>
            <div class="flex-1 rom-item">SAVE file.</div>
            <div id="savesFile" class="column"></div>
            <div class="flex-1 rom-item">CHEAT file.</div>
            <div id="cheatsFile" class="column"></div>
            <div class="flex-1 rom-item">SSHOT file.</div>
            <div id="screenshotsFile" class="column"></div>
        </div>
        <div class="flex-1"></div>
    </div>

    <div class="between column intro" id="intro">
        <div class="target-boxes" id="target-boxes"></div>
        <div class="flex-1 ch column gap-8">
            <label class="logo bc" id="openLocalStorage"></label>
            <div class="gap-8 file-section">
                <div class="flex-1 bc">
                    <svg id="setAdjustment" width="46" height="100" viewBox="0 0 46 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="46" height="100" fill="" />
                        <rect id="rect1" x="16" y="16" width="14" height="4" rx="0.6" fill="#F5E8D1" />
                        <rect id="rect2" x="16" y="24" width="14" height="4" rx="0.6" fill="#F5E8D1" />
                        <rect id="rect3" x="16" y="32" width="14" height="4" rx="0.6" fill="#F5E8D1" />
                        <path d="M22 68H14V58H22V68ZM16 60V66H20V60H16Z" fill="#F5E8D1" />
                        <path id="G0" opacity="0" d="M32 68H24V58H32V68ZM26 60V66H30V60H26Z" fill="#F5E8D1" />
                        <path id="G1" opacity="0" d="M26 68V60H24V58H28V68H26Z" fill="#F5E8D1" />
                        <path id="G2" opacity="0" d="M24 58H32V64H26V66H32V68H24V62H30V60H24V58Z" fill="#F5E8D1" />
                        <path id="G3" opacity="1" d="M32 68H24V66H30V64H24V62H30V60H24V58H32V68Z" fill="#F5E8D1" />
                        <g opacity="0.4">
                            <path d="M14 76H22V84H16V86H14V76ZM20 82V78H16V82H20Z" fill="#F5E8D1" />
                            <path d="M28 86H24V78H26V80H28V82H26V84H28V86Z" fill="#F5E8D1" />
                            <path d="M30 86V84H32V86H30Z" fill="#F5E8D1" />
                        </g>
                    </svg>
                </div>
                <label for="fileInput" class="flex-1 bc select-file" id="fileInputLable"></label>
                <input type="file" id="fileInput" hidden />
            </div>
        </div>
        <div class="column rom-list flex-disable" id="rom-list"></div>
    </div>

    <div class="firstLoading column cw ch">
        <div class="flex-1"></div>
        <span class=""></span></br>
        <div class="">
            <span style="opacity: 0.4" id="appVer"></span>
            <svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path id="path-1" opacity="0.4" d="M0 12V10H2V12H0Z" fill="#F5E8D1"/>
                <path id="path-2" opacity="0.4" d="M4 12V10H6V12H4Z" fill="#F5E8D1"/>
                <path id="path-3" opacity="0.4" d="M8 12V10H10V12H8Z" fill="#F5E8D1"/>
            </svg>
        </div>
        <div class="flex-1"></div>
    </div>

    <div class="lockNoti column cw ch visible" id="lockNoti">
        <div class="flex-1"></div>
        <span class="" id="notiTitle"></span></br>
        <span class="" id="notiDetail" style="opacity: 0.4"></span>
        <div class="flex-1"></div>
    </div>
    <script>let gameVer = 'V3.09';</script>
    <script type="" src="./src/js/global.js"></script> 
    <script type="module" src="./src/js/main.js"></script> 
    <script type="module" src="./src/js/welcome.js"></script> 
    <script type="module" src="./src/js/gamepad.js"></script> 
    <script type="module" src="./src/js/ocr.js"></script>
    <script type="module" src="./src/js/setting.js"></script> 
    <script type="module" src="./src/js/state.js"></script> 
    <script type="module" src="./src/js/storage.js"></script> 
    <script type="module" src="./src/js/cloud.js"></script>  
</body>

</html> 